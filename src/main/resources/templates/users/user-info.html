<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>User Information</title>
</head>
<body>
<div th:replace="~{fragments/header :: navbar}"></div>

<div class="container mt-4">
    <h3>User Details</h3>

    <div class="card mt-3 shadow-sm">
        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0" th:text="${user.username}">Username</h5>
            <span th:if="${user.enabled}" class="badge bg-success">Active</span>
            <span th:unless="${user.enabled}" class="badge bg-danger">Banned</span>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-3 fw-bold">ID (UUID):</div>
                <div class="col-md-9 text-muted" th:text="${user.id}"></div>
            </div>

            <div class="row mb-3">
                <div class="col-md-3 fw-bold">Roles:</div>
                <div class="col-md-9">
                    <span th:each="role : ${user.roles}"
                          class="badge bg-primary me-1"
                          th:text="${role.name}">ROLE</span>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-3 fw-bold">Created At:</div>
                <div class="col-md-9"
                     th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd HH:mm:ss')}">Date</div>
            </div>
        </div>
        <div class="card-footer">
            <div class="d-flex gap-2">
                <button type="button" class="btn btn-outline-secondary" onclick="history.back()">Back</button>
                <a th:href="@{/users}" class="btn btn-secondary">Back to List</a>

                <a th:href="@{/users/toggle(id=${user.id})}"
                   class="btn"
                   th:classappend="${user.enabled} ? 'btn-warning' : 'btn-success'"
                   th:text="${user.enabled} ? 'Block User' : 'Activate User'">
                    Toggle
                </a>

                <a th:href="@{/users/delete(id=${user.id})}"
                   class="btn btn-danger"
                   onclick="return confirm('Delete this user?')">Delete</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>